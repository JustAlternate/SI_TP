\documentclass{article}

\usepackage[margin=0.3in]{geometry}
\usepackage{amsmath}
\usepackage{listings}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}


\author{Loïc Weber \& Thibault Gounant} 
\title{Cahier de TP}

\begin{document}

\setlength\parindent{0pt}

\maketitle

\renewcommand*\contentsname{Table des matières}
\tableofcontents

\section{TP1 : Unix, le système de fichier}

\subsection{Manuel}
\begin{lstlisting}
man <commande>          # Afficher les pages du manuel correspondant a la commande
whatis <commande>       # Afficher la description du manuel correspondant a la commande
apropos <mot>           # Afficher les descriptions du manuel dont les pages contienent le mot 
history                 # Afficher l'historique des commandes
alias <commande>=<expr> # Creer une commande correspondant a une expression
\end{lstlisting}

\subsection{Hierarchie}
\begin{lstlisting}
/    # Repertoire racine
..   # Repertoire parent
~    # Repertoire maison
\end{lstlisting}

\begin{lstlisting}
ls <dossier>    # Afficher le contenu du dossier
pwd             # Afficher le chemin absolu du dossier courant
cd <dossier>    # Changer de dossier
tree            # Afficher l'arborescence de repertoires
\end{lstlisting}

\subsection{Affichage}
\begin{lstlisting}
file <fichier>  # Afficher une description du type du fichier
cat <fichier>   # Afficher le contenu du fichier
sort <fichier>  # Afficher le contenu du fichier trie
more <fichier>  # Visualiser le contenu du fichier par le haut
less <fichier>  # Visualiser le contenu du fichier par le bas
\end{lstlisting}

\subsection{Gestion}
\begin{lstlisting}
mkdir <dossier>             # Creer le dossier
rmdir <dossier>             # Supprimer le dossier vide
touch <fichier>             # Creer le fichier
rm <fichier>                # Supprimer le fichier
cp <fichier> <dossier>      # Copier le fichier dans le dossier
mv <fichier> <dossier>      # Deplacer le fichier dans le dossier
ln <fichier1> <fichier2>    # Creer un raccourci fichier1 vers le fichier2 
\end{lstlisting}

\section{TP2 : Commandes utilisateur Unix}

\subsection{Droits des fichiers}

\begin{lstlisting}
chmod <droit> <fichier>   # Changer les droits du fichier
\end{lstlisting}

Unix attribue à tous les fichiers deux choses :

\begin{itemize}
  \item Un créateur et un groupe.
  \item Une liste de droits pour le créateur, le groupe et pour tous les autres (les triplets)
\end{itemize}

Exemple de droit pour le dossier "Projects" visible avec la commande "ls -l" : 
\begin{lstlisting}
drwxr-xr-x 17 justalternate root           4096 Aug  2 18:37 Projects
\end{lstlisting}
Les 10 premiers caractères représente :
\begin{itemize}
  \item Le type de fichier (d = directory, - = regular file, l = symbolic link, p = pipe, s = socket ..)
  \item Les 3 premiers droits créateur (rwx = tous les droits)
  \item 3 droits du groupe (r-x)
  \item 3 droits pour tous les autres (r-x)
  \item le créateur (justalternate)
  \item le groupe associé (root)
\end{itemize}

Afin de modifier les droits d'un fichier, on peut d'abord agir sur les droits créateur, groupe et autre :

\begin{lstlisting}
chmod +x fichier    # Donne a tous les utilisateurs la permission d'execution
chmod u+r fichier   # Donne au proprietaire la permission de lecture
chmod g+w fichier   # Donne au groupe la permission d'ecriture
chmod o+x fichier   # Donne a autre la permission d'execution
chmod a-r fichier   # Enleve a tous (u,g,o) les permissions de lecture
chmod u+s fichier   # Donne les memes droits que le proprietaire a l'utilisateur
chmod o+t fichier   # Seul le proprietaire a la permission d'execution
\end{lstlisting}

On peut ensuite modifier le groupe ou bien le créateur :

\begin{lstlisting}
chgrp IDIA2026 Systeme_Info # Change le groupe du fichier "Systeme_Info" en "IDIA2026"
chown IDIA2026 Systeme_Info # Change le createur du fichier "Systeme_Info" en "IDIA2026"
\end{lstlisting}

\subsection{Système}
\begin{itemize}
  \item /etc/fstab : liste les montages disponibles
  \item /etc/mtab : liste les points actuellements montés
\end{itemize}
\begin{lstlisting}
df <fichier>    # Occupation disque du fichier
mount           # Monte un systeme de fichiers dans un repertoire de l'arborescence
\end{lstlisting}

\subsection{Redirection}
Dans Unix, on peut rediriger la sortie d'une commande dans un fichier ou bien utiliser un fichier en tant qu'arguments pour une commande.
\begin{lstlisting}
ls > listefichiers.txt
\end{lstlisting}

Cette commande créer (ou écrase) le fichier "listefichiers.txt" avec le résultat de la commande "ls".

D'autres types de redirection :

\begin{itemize}
  \item $>>$    \# Permet d'ajouter à la fin (append)
  \item $<$    \# Permet d'utiliser le contenu d'un fichier pour exécuter la commande.
  \item $2>\&1$ \# Permet d'ajouter les potentielles erreurs de la commande dans le fichier
\end{itemize}

Le pipe 
\begin{lstlisting}
<commande1> | <commande2>
\end{lstlisting}
 la sortie de la première commande devient l'entrée de la deuxième commande

\subsection{Recherche}
\begin{lstlisting}
find <expr>             # Rechercher un fichier
grep <expr> <fichier>   # Rechercher une expression dans le fichier
\end{lstlisting}

\section{TP3 : Commandes utiles}

\subsection{Traitement des fichiers}
\begin{lstlisting}
  head <fichier>    # premières lignes d’un fichier
  tail <fichier>    # dernières lignes d’un fichier
  split <fichier>   # fractionnement d’un fichier en plusieurs
  cut <fichier>     # fractionnement vertical d’un fichier  
\end{lstlisting}

sed
Permet de remplacer des occurences de mots dans un fichier.
\begin{lstlisting}
sed 's/Hello/Bonjour/g' fichier.txt #-> remplace 'Hello' par 'Bonjour' dans le fichier.txt
\end{lstlisting}

tr
Permet de remplacer a petite echelle.

\begin{lstlisting}
echo toto | tr o a      #-> tata
echo hello | tr heo abc #-> abllc
\end{lstlisting}


diff
Super commande qui permet de comparer deux fichiers lignes par lignes et d'afficher les lignes différentes.

\begin{lstlisting}
diff fichier1 fichier2
\end{lstlisting}

uniq
Permet de ne pas tenir compte des répétitions.
\begin{lstlisting}
uniq fichier
\end{lstlisting}

comm
Permet de comparer deux fichiers triée ligne par ligne et de montrer lignes communes.
\begin{lstlisting}
comm fichier1 fichier2
\end{lstlisting}


\end{document}
